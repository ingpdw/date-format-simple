'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var DateFormat=function(){function DateFormat(){var _now=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Date().getTime();var format=arguments[1];var isGMT=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var dateFormat=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'YYYY. MM. DD. ';_classCallCheck(this,DateFormat);this._now=_now;this.isGMT=isGMT;this.dateFormat=dateFormat;if(this.isGMT){this._now=this.toDate(this._now).getTime()}this.format={'a_few_seconds_ago':'a few seconds ago','seconds_ago':'seconds ago','a_minute_ago':'a minute ago','minutes_ago':'minutes ago','an_hour_ago':'an hour ago','hours_ago':'hours ago','a_day_ago':'a day ago','days_ago':'days ago','a_month_ago':'a month ago','months_ago':'months ago','a_year_ago':'a year ago','years_ago':'years ago'};this.extend(this.format,format)}_createClass(DateFormat,[{key:'extend',value:function extend(dist,src){for(var item in src){if(src.hasOwnProperty(item))dist[item]=src[item]}}},{key:'getDateFormat',value:function getDateFormat(y,m,d,h,t,s){var printDate=this.dateFormat;if(this.dateFormat.indexOf('YYYY')===-1){y=y.toString().substring(2,4)}printDate=printDate.replace('YYYY',y).replace('YY',y).replace('MM',m).replace('DD',d);if(h&&t&&s){printDate=printDate+' '+h+':'+t+':'+s}return printDate}},{key:'setDateFormat',value:function setDateFormat(dateFormat){this.dateFormat=dateFormat}},{key:'toDate',value:function toDate(notUtc){return this.toGMTDate(notUtc,true)}},{key:'toGMTDate',value:function toGMTDate(utc,isNotUtc){var clientDate=new Date;var zoneOffset=clientDate.getTimezoneOffset();if(!utc)return clientDate;if(isNotUtc)zoneOffset=0;var _utc=utc.split('T'),date=_utc[0].split('-'),time=_utc[1].split(':');return new Date(date[0],parseInt(date[1],10)-1,date[2],time[0],parseInt(time[1],10)-zoneOffset,time[2].split('.')[0])}},{key:'getNow',value:function getNow(){return new Date(this._now)}},{key:'getNowMilisecond',value:function getNowMilisecond(){return this._now}},{key:'setNow',value:function setNow(){var now=arguments.length>0&&arguments[0]!==undefined?arguments[0]:+new Date;this._now=now;return this._now}},{key:'calculate',value:function calculate(myDate){var diff=Math.abs(this._now-myDate)/1000,years=Math.floor(diff/31536000),months=Math.floor(diff/2592000),days=Math.floor(diff/86400),hours=Math.floor(diff/3600)%24,minutes=Math.floor(diff/60)%60,seconds=Math.floor(diff%60);if(years>1)return''+years+this.format.years_ago;if(years>0)return''+this.format.a_year_ago;if(months>1)return''+months+this.format.months_ago;if(months>0)return''+this.format.a_month_ago;if(days>1)return''+days+this.format.days_ago;if(days>0)return''+this.format.a_day_ago;if(hours>1)return''+hours+this.format.hours_ago;if(hours>0)return''+this.format.an_hour_ago;if(minutes>1)return''+minutes+this.format.minutes_ago;if(minutes>0)return''+this.format.a_minute_ago;if(seconds>20&&this.format.seconds_ago)return''+seconds+this.format.seconds_ago;if(seconds>0)return''+this.format.a_few_seconds_ago;return''}},{key:'_format',value:function _format(_date,isOnlyDate){var y=_date.getFullYear(),m=('0'+(_date.getMonth()+1)).slice(-2),d=('0'+_date.getDate()).slice(-2),h=('0'+_date.getHours()).slice(-2),t=('0'+_date.getMinutes()).slice(-2),s=('0'+_date.getSeconds()).slice(-2);if(isOnlyDate)return this.getDateFormat(y,m,d);return this.getDateFormat(y,m,d,h,t,s)}},{key:'diffDate',value:function diffDate(date1,date2){if(!date1||!date2)return 0;return Math.abs(date2.getTime()-date1.getTime())/1000}},{key:'printUntil',value:function printUntil(date){var type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'month';var isOnlyDate=arguments[2];var myDate=this.printFull(date,false,true);var now=this.getNow();var diff=this.diffDate(myDate,now);var years=Math.floor(diff/31536000);var months=Math.floor(diff/2592000);var days=Math.floor(diff/86400);if(years>0&&type=='year'){return this._format(new Date(myDate),isOnlyDate)}if(months>0&&type=='month'){return this._format(new Date(myDate),isOnlyDate)}if(days>0&&type=='day'){return this._format(new Date(myDate),isOnlyDate)}return this.calculate(new Date(myDate))}},{key:'printOnlyDate',value:function printOnlyDate(utc){return this.printFull(utc,true)}},{key:'printFull',value:function printFull(utc,isOnlyDate,isPrintDate){var clientDate=new Date,_date=void 0,_time=void 0;var zoneOffset=clientDate.getTimezoneOffset();if(!utc)return clientDate;if(utc.indexOf('T')==-1){return this._format(new Date(utc))}utc=utc.split('T');_date=utc[0].split('-');_time=utc[1].split(':');var y=_date[0],m=parseInt(_date[1],10)-1,d=_date[2],h=_time[0],t=parseInt(_time[1],10)-zoneOffset,s=_time[2].split('.')[0],_newDate=new Date(y,m,d,h,t,s);if(isPrintDate)return _newDate;return this._format(_newDate,isOnlyDate)}},{key:'print',value:function print(myDate){if(!myDate)return'';return this.calculate(myDate)}}]);return DateFormat}();exports.default=DateFormat;